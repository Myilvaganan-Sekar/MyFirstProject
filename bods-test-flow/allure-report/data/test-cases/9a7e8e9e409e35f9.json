{"uid":"9a7e8e9e409e35f9","name":"image comparison v1.1.4 :: 1627-cupSizeBtoC_en","fullName":"BODS :: Screen.image comparison v1.1.4 :: 1627-cupSizeBtoC_en","historyId":"6b84bca593e9e8cb4a20a3ad303ddaf7","time":{"start":1704478632421,"stop":1704478637879,"duration":5458},"description":"","descriptionHtml":"\n                  <script>\n                    var rvDefaultScreenshot = (timer) => {\n                      // Remove default screenshot\n                      var eles = document.getElementsByClassName(\"attachment-row__name long-line\");\n                      var xPath = \"//div[contains(text(),'Screenshot')]\";\n                      var arr = [];\n                      for (let i = 0; i < eles.length; i++) {\n                        if(eles[i].textContent.includes(\"Screenshot\")){\n                          arr.push(eles[i].parentNode.parentNode);\n                        }\n            \n                        if(eles[i].textContent.includes(\"Diff\")){\n                          var referenceNode = eles[i].parentNode.parentNode;\n                          var newNode = document.createElement(\"hr\");\n                          referenceNode.after(newNode);\n                        }\n                      }\n                      for (let j = 0; j < arr.length; j++) {\n                        arr[j].remove();\n                      }\n            \n                      // Remove default browser or device\n                      var browserXPath = \"//span[contains(text(),'browser')]\";\n                      var deviceXPath = \"//span[contains(text(),'device')]\";\n                      var browserEle = document.evaluate(browserXPath, document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;\n                      var deviceEle = document.evaluate(deviceXPath, document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;\n                      if(browserEle != null) {\n                        browserEle.parentNode.remove();\n                      }\n                      if(deviceEle != null) {\n                        deviceEle.parentNode.remove();\n                      }\n            \n                      console.log(\"Timer is working\");\n            \n                      var matchingElement = document.evaluate(xPath, document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;\n                      if(matchingElement == null) {\n                        clearInterval(timer);\n                        console.log(\"Timer is ended\");\n                      }\n                    }\n            \n                    var timer = setInterval(() => {\n                      rvDefaultScreenshot(timer);\n                    }, 100);\n                  </script>\n                \n                  <div style=\"font-size:16pt;\"><span style=\"color: blue;\">This spec is active for automation test. You can change the status by one of actions below.</span></div>\n                  <ul style=\"list-style: none;margin-left: -1.5em;\">\n                    \n                    \n                  <li>\n                    <span class=\"fa fa-archive\"></span>\n                    <a class=\"link\" target=\"_blank\" href=\" /job/bods-test-flow/buildWithParameters?qatest=tests%20deactivate%20--exec-dis-testname=012_bods.1627-cupSizeBtoC_en\">Deactivate this spec</a>\n                  </li>\n                  </br>\n                \n                    \n                  <li>\n                    <span class=\"fa fa-signing\"></span>\n                    <a class=\"link\" target=\"_blank\" href=\" /job/bods-test-flow/buildWithParameters?qatest=tests%20manual%20--exec-dis-testname=012_bods.1627-cupSizeBtoC_en\">Confirm this spec for manual test</a>\n                  </li>\n                  </br>\n                \n                    \n                  <li>\n                    <span class=\"fa fa-support\"></span>\n                    <a class=\"link\" target=\"_blank\" href=\" /job/bods-test-flow/buildWithParameters?qatest=tests%20support%20--exec-dis-testname=012_bods.1627-cupSizeBtoC_en\">Request support from QA Auto</a>\n                  </li>\n                  </br>\n                \n                    \n                  <li>\n                    <span class=\"fa fa-photo\"></span>\n                    <a class=\"link\" target=\"_blank\" href=\" /job/bods-test-flow/buildWithParameters?qatest=screenshot%20override%20--scr-testname=012_bods.1627-cupSizeBtoC_en\">Update baseline</a>\n                  </li>\n                \n                  </ul>\n                ","status":"broken","statusMessage":"Image comparison is failed. Diff percentage is 89.433%.","statusTrace":"Error: Image comparison is failed. Diff percentage is 89.433%.\n                    at Utils.imgCompare (C:\\Users\\myilv\\MyFirstProject\\bods-test-flow\\utils\\/utils.js:115:9)\n                    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n                    at Context.<anonymous> (C:\\Users\\myilv\\MyFirstProject\\bods-test-flow\\test\\specs\\bods-us\\bods\\record\\screen\\/012_bods.1627-cupSizeBtoC_en.js:65:5)","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"broken","statusMessage":"Image comparison is failed. Diff percentage is 89.433%.","statusTrace":"Error: Image comparison is failed. Diff percentage is 89.433%.\n                    at Utils.imgCompare (C:\\Users\\myilv\\MyFirstProject\\bods-test-flow\\utils\\/utils.js:115:9)\n                    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n                    at Context.<anonymous> (C:\\Users\\myilv\\MyFirstProject\\bods-test-flow\\test\\specs\\bods-us\\bods\\record\\screen\\/012_bods.1627-cupSizeBtoC_en.js:65:5)","steps":[],"attachments":[{"uid":"2b6ae0d9ea4e51a0","name":"Baseline: 012_bods.1627-cupSizeBtoC_en","source":"2b6ae0d9ea4e51a0.png","type":"image/png","size":385701},{"uid":"7b89d5b9e3cf489c","name":"Actual: 012_bods.1627-cupSizeBtoC_en","source":"7b89d5b9e3cf489c.png","type":"image/png","size":1361344},{"uid":"b7b9cced0c408445","name":"Diff: 012_bods.1627-cupSizeBtoC_en","source":"b7b9cced0c408445.png","type":"image/png","size":187350},{"uid":"13a61aaaa484ce39","name":"HTML: 012_bods.1627-cupSizeBtoC_en","source":"13a61aaaa484ce39.txt","type":"text/plain","size":17454},{"uid":"c9b0f65f5216c871","name":"Console Logs","source":"c9b0f65f5216c871.html","type":"text/html","size":2303}],"parameters":[],"hasContent":true,"attachmentStep":false,"stepsCount":0,"attachmentsCount":5,"shouldDisplayMessage":true},"afterStages":[],"labels":[{"name":"feature","value":"BODS US :: BODS"},{"name":"framework","value":"wdio"},{"name":"language","value":"javascript"},{"name":"severity","value":"critical"},{"name":"story","value":"Screen"},{"name":"thread","value":"0-9"},{"name":"suite","value":"BODS :: Screen"},{"name":"testClass","value":"BODS :: Screen"},{"name":"testMethod","value":"image comparison v1.1.4 :: 1627-cupSizeBtoC_en"},{"name":"package","value":"BODS :: Screen"},{"name":"resultFormat","value":"allure1"}],"parameters":[{"name":"browser","value":"chrome-120.0.6099.130"},{"name":"browser name","value":"Chrome 120.0.6099.130"},{"name":"case","value":"012_bods.1627-cupSizeBtoC_en"},{"name":"platform","value":"Windows"},{"name":"url","value":"https://ralphlauren.feature.dev.bods.me/"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"critical","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"9a7e8e9e409e35f9.json","parameterValues":["chrome-120.0.6099.130","Chrome 120.0.6099.130","012_bods.1627-cupSizeBtoC_en","Windows","https://ralphlauren.feature.dev.bods.me/"]}